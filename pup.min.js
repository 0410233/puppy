(function(e,t){if(e.addEventListener){var r=t();null!=r&&(e.pup=r,e.addEventListener("unload",function(){r.sleep(),e.pup=null}),e.addEventListener("DOMContentLoaded",function(){r.wakeup();var e=document.querySelectorAll(r.selector);e.length&&e.forEach(function(e){var t=e.querySelector('input[name="track_report"]');t||(t=document.createElement("input"),t.setAttribute("name","track_report"),t.setAttribute("type","text"),t.setAttribute("style","display:none"),e.appendChild(t)),e.onsubmit=function(){t.value=r.notes()}})}))}})(window,function(){function e(e){return"/"===e.slice(-1)&&(e+="index.html"),e.toLowerCase()}function t(){f=o.PUPsNoteBook;try{if(!f)throw"";if(f=JSON.parse(f),f.version!==l)throw"";var e=f.memory.length,t=f.memory[e-1];if(i-t.leave>5e3)throw"";if(t.url===a.url)f.memory.push(c);else{if(t.url!==c.url)throw"";c=t,c.leave=i}}catch(e){f={version:l,memory:[a,c]}}}function r(){c.leave=Date.now(),o.PUPsNoteBook=JSON.stringify(f)}function n(){clearTimeout(s),r(),s=setTimeout(n,3e3)}var o=window.localStorage;if("object"!=typeof o)return null;var u=window.location,l="0.1.0",i=Date.now(),a={url:e(document.referrer),enter:i,leave:i},c={url:e(u.href),enter:i,leave:i},f=null,s=null;return{selector:"form.report_trace",home:function(e){this.selector=e},wakeup:function(){t(),n()},sleep:function(){clearTimeout(s),r()},notes:function(){r();for(var e={refer:f.memory[0].url,trace:[]},t=null,n=f.memory.length-1;n>0;n--)t=f.memory[n],e.trace.push([t.url,Math.round((t.leave-t.enter)/1e3)]);return JSON.stringify(e)}}});